<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SIS - Student Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
  * {
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  body {
    background: #f0f2f5;
    min-height: 100vh;
    overflow-x: hidden;
  }
  /* Navbar Styles */
  .navbar-custom {
    background: white;
    box-shadow: 0 2px 20px rgba(0,0,0,0.08);
    padding: 1rem 0;
    position: sticky;
    top: 0;
    z-index: 1000;
  }
  .navbar-brand {
    font-weight: 700;
    font-size: 1.5rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .nav-link-custom {
    color: #4a5568;
    font-weight: 500;
    padding: 0.5rem 1rem;
    margin: 0 0.25rem;
    border-radius: 8px;
    transition: all 0.3s ease;
  }
  .nav-link-custom:hover {
    background: #f7fafc;
    color: #667eea;
  }
  .nav-link-custom.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
  }
  .logout-btn {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    border: none;
    color: white;
    padding: 0.5rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
  }
  .logout-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(240, 147, 251, 0.4);
  }
  
  /* Hero Section */
  .hero-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 3rem 0 8rem 0;
    position: relative;
    overflow: hidden;
  }
  .hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="rgba(255,255,255,0.1)" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,138.7C960,139,1056,117,1152,96C1248,75,1344,53,1392,42.7L1440,32L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
    background-size: cover;
    opacity: 0.5;
  }
  .hero-content {
    position: relative;
    z-index: 1;
    color: white;
  }
  .welcome-text {
    font-size: 1.2rem;
    font-weight: 300;
    opacity: 0.95;
    margin-bottom: 0.5rem;
  }
  .student-name {
    font-size: 3rem;
    font-weight: 800;
    margin-bottom: 1rem;
    text-shadow: 0 2px 10px rgba(0,0,0,0.2);
  }
  .student-info {
    font-size: 1.1rem;
    opacity: 0.9;
    display: flex;
    align-items: center;
    gap: 2rem;
    flex-wrap: wrap;
  }
  .info-badge {
    background: rgba(255,255,255,0.2);
    backdrop-filter: blur(10px);
    padding: 0.5rem 1.2rem;
    border-radius: 20px;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  /* Stats Cards */
  .stats-container {
    margin-top: -5rem;
    position: relative;
    z-index: 10;
  }
  .stat-card {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 10px 40px rgba(0,0,0,0.08);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: none;
    height: 100%;
    position: relative;
    overflow: hidden;
  }
  .stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease;
  }
  .stat-card:hover::before {
    transform: scaleX(1);
  }
  .stat-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 60px rgba(102, 126, 234, 0.2);
  }
  .stat-icon {
    width: 60px;
    height: 60px;
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    margin-bottom: 1rem;
  }
  .stat-icon.attendance {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
  }
  .stat-icon.cgpa {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
  }
  .stat-icon.semester {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    color: white;
  }
  .stat-icon.rank {
    background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    color: white;
  }
  .stat-label {
    font-size: 0.85rem;
    color: #718096;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.5rem;
  }
  .stat-value {
    font-size: 2.5rem;
    font-weight: 800;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1;
  }
  
  /* Content Cards */
  .content-card {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 5px 30px rgba(0,0,0,0.06);
    margin-bottom: 2rem;
    border: 1px solid rgba(0,0,0,0.05);
    transition: all 0.3s ease;
  }
  .content-card:hover {
    box-shadow: 0 10px 50px rgba(0,0,0,0.1);
  }
  .card-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: #2d3748;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }
  .card-title i {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Personal Info */
  .info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
  }
  .info-item {
    padding: 1.2rem;
    background: #f7fafc;
    border-radius: 12px;
    transition: all 0.3s ease;
  }
  .info-item:hover {
    background: #edf2f7;
    transform: translateX(5px);
  }
  .info-label {
    color: #667eea;
    font-weight: 600;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .info-value {
    color: #2d3748;
    font-size: 1rem;
    font-weight: 500;
  }
  
  /* Subject Performance */
  .subject-item {
    padding: 1.5rem;
    background: #f7fafc;
    border-radius: 12px;
    margin-bottom: 1rem;
    transition: all 0.3s ease;
  }
  .subject-item:hover {
    background: white;
    box-shadow: 0 5px 20px rgba(0,0,0,0.08);
    transform: translateX(5px);
  }
  .subject-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }
  .subject-name {
    font-weight: 600;
    font-size: 1.05rem;
    color: #2d3748;
  }
  .subject-marks {
    font-size: 0.9rem;
    color: #718096;
  }
  .subject-percentage {
    font-size: 1.5rem;
    font-weight: 700;
  }
  .progress-bar-custom {
    height: 8px;
    border-radius: 10px;
    background: #e2e8f0;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    border-radius: 10px;
    transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }
  .progress-fill.excellent {
    background: linear-gradient(90deg, #43e97b 0%, #38f9d7 100%);
  }
  .progress-fill.good {
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
  }
  .progress-fill.average {
    background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
  }
  .progress-fill.poor {
    background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%);
  }
  
  /* Chart Styles */
  .chart-container {
    position: relative;
    height: 300px;
    padding: 1rem;
  }
  
  /* Attendance Table */
  .attendance-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 0.5rem;
  }
  .attendance-table thead th {
    background: #f7fafc;
    padding: 1rem;
    font-weight: 600;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #4a5568;
    border: none;
  }
  .attendance-table tbody tr {
    background: #f7fafc;
    transition: all 0.3s ease;
  }
  .attendance-table tbody tr:hover {
    background: white;
    box-shadow: 0 3px 15px rgba(0,0,0,0.08);
    transform: scale(1.01);
  }
  .attendance-table tbody td {
    padding: 1rem;
    border: none;
  }
  .attendance-table tbody tr td:first-child {
    border-radius: 10px 0 0 10px;
  }
  .attendance-table tbody tr td:last-child {
    border-radius: 0 10px 10px 0;
  }
  .status-badge {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.85rem;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }
  .status-badge.present {
    background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    color: white;
  }
  .status-badge.absent {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
  }
  
  /* Loading Animation */
  .loading-spinner {
    display: inline-block;
    width: 40px;
    height: 40px;
    border: 4px solid #f3f4f6;
    border-top: 4px solid #667eea;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .student-name {
      font-size: 2rem;
    }
    .stat-value {
      font-size: 2rem;
    }
    .hero-section {
      padding: 2rem 0 6rem 0;
    }
    .stats-container {
      margin-top: -4rem;
    }
  }
</style>
</head>
<body>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar navbar-custom navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand" href="#">
        <i class="bi bi-mortarboard-fill me-2"></i>Student Portal
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto align-items-center">
          <li class="nav-item">
            <a class="nav-link-custom active" href="/students/profile/">
              <i class="bi bi-house-door me-1"></i>Dashboard
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-custom" href="#performance">
              <i class="bi bi-graph-up me-1"></i>Performance
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link-custom" href="#attendance">
              <i class="bi bi-calendar-check me-1"></i>Attendance
            </a>
          </li>
          <li class="nav-item ms-3">
            <a href="/students/login/" class="logout-btn">
              <i class="bi bi-box-arrow-right me-2"></i>Logout
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container hero-content">
      <div class="welcome-text">
        <i class="bi bi-hand-wave me-2"></i>Welcome back,
      </div>
      <h1 class="student-name" id="heroName">Loading...</h1>
      <div class="student-info">
        <div class="info-badge">
          <i class="bi bi-hash"></i>
          <span id="heroEnrollment">--</span>
        </div>
        <div class="info-badge">
          <i class="bi bi-mortarboard"></i>
          <span id="heroClass">--</span>
        </div>
        <div class="info-badge">
          <i class="bi bi-award"></i>
          <span id="heroSection">--</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Stats Section -->
  <section class="stats-container">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-3 col-md-6">
          <div class="stat-card">
            <div class="stat-icon attendance">
              <i class="bi bi-calendar-check"></i>
            </div>
            <div class="stat-label">Attendance</div>
            <div class="stat-value" id="statAttendance">--%</div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="stat-card">
            <div class="stat-icon cgpa">
              <i class="bi bi-trophy"></i>
            </div>
            <div class="stat-label">CGPA</div>
            <div class="stat-value" id="statCGPA">--</div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="stat-card">
            <div class="stat-icon semester">
              <i class="bi bi-bookmark-star"></i>
            </div>
            <div class="stat-label">Current Semester</div>
            <div class="stat-value" id="statSemester">--</div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="stat-card">
            <div class="stat-icon rank">
              <i class="bi bi-award"></i>
            </div>
            <div class="stat-label">Class Rank</div>
            <div class="stat-value" id="statRank">--</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="container py-5">
    <div class="row g-4">
      <!-- Personal Information -->
      <div class="col-lg-4">
        <div class="content-card">
          <h2 class="card-title">
            <i class="bi bi-person-badge"></i>
            Personal Information
          </h2>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">
                <i class="bi bi-envelope"></i>Email
              </div>
              <div class="info-value" id="profileEmail">--</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <i class="bi bi-phone"></i>Contact
              </div>
              <div class="info-value" id="profileContact">--</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <i class="bi bi-cake2"></i>Date of Birth
              </div>
              <div class="info-value" id="profileDOB">--</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <i class="bi bi-gender-ambiguous"></i>Gender
              </div>
              <div class="info-value" id="profileGender">--</div>
            </div>
            <div class="info-item" style="grid-column: 1 / -1;">
              <div class="info-label">
                <i class="bi bi-geo-alt"></i>Address
              </div>
              <div class="info-value" id="profileAddress">--</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Subject Performance -->
      <div class="col-lg-8">
        <div class="content-card" id="performance">
          <h2 class="card-title">
            <i class="bi bi-graph-up"></i>
            Subject Performance
          </h2>
          <div id="subjectsContainer">
            <div class="text-center py-4">
              <div class="loading-spinner mx-auto"></div>
              <p class="mt-3 text-muted">Loading subjects...</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Attendance Section -->
    <div class="row g-4 mt-2" id="attendance">
      <div class="col-lg-6">
        <div class="content-card">
          <h2 class="card-title">
            <i class="bi bi-bar-chart-line"></i>
            Attendance Trend
          </h2>
          <div class="chart-container">
            <canvas id="attendanceChart"></canvas>
          </div>
        </div>
      </div>

      <div class="col-lg-6">
        <div class="content-card">
          <h2 class="card-title">
            <i class="bi bi-clock-history"></i>
            Recent Attendance
          </h2>
          <div class="table-responsive">
            <table class="attendance-table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Status</th>
                  <th>Day</th>
                </tr>
              </thead>
              <tbody id="attendanceTableBody">
                <tr>
                  <td colspan="3" class="text-center py-4">
                    <div class="loading-spinner mx-auto"></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
let attendanceChart = null;

document.addEventListener('DOMContentLoaded', function() {
  initializeChart();
  loadStudentProfile();
  
  // Smooth scrolling for navigation
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });
});

function initializeChart() {
  const ctx = document.getElementById('attendanceChart');
  if (ctx) {
    attendanceChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [],
        datasets: [{
          label: 'Attendance',
          data: [],
          backgroundColor: 'rgba(102, 126, 234, 0.1)',
          borderColor: '#667eea',
          borderWidth: 3,
          fill: true,
          tension: 0.4,
          pointBackgroundColor: '#667eea',
          pointBorderColor: '#fff',
          pointBorderWidth: 2,
          pointRadius: 6,
          pointHoverRadius: 8
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: 'rgba(0, 0, 0, 0.8)',
            padding: 12,
            cornerRadius: 8,
            titleFont: { size: 14, weight: '600' },
            bodyFont: { size: 13 },
            callbacks: {
              label: function(context) {
                return context.parsed.y === 1 ? 'Present ✓' : 'Absent ✗';
              }
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            max: 1,
            ticks: {
              stepSize: 1,
              callback: function(value) {
                return value === 1 ? 'P' : 'A';
              },
              font: { size: 12, weight: '600' },
              color: '#718096'
            },
            grid: {
              color: 'rgba(0, 0, 0, 0.05)',
              drawBorder: false
            }
          },
          x: {
            ticks: {
              font: { size: 11, weight: '500' },
              color: '#718096'
            },
            grid: { display: false }
          }
        }
      }
    });
  }
}

function loadStudentProfile() {
  fetch('/api/student-profile/', {
    credentials: 'same-origin',  // Include session cookies
    headers: {
      'X-Requested-With': 'XMLHttpRequest'
    }
  })
    .then(response => {
      if (!response.ok) throw new Error('Failed to fetch student profile');
      return response.json();
    })
    .then(data => {
      console.log('Student profile loaded:', data);
      updateUI(data);
    })
    .catch(error => {
      console.error('Error:', error);
      showError();
    });
}

function updateUI(data) {
  // Hero section
  document.getElementById('heroName').textContent = data.name;
  document.getElementById('heroEnrollment').textContent = data.enrollment;
  document.getElementById('heroClass').textContent = data.class;
  document.getElementById('heroSection').textContent = data.section;
  
  // Stats cards
  document.getElementById('statAttendance').textContent = data.attendance + '%';
  document.getElementById('statCGPA').textContent = data.cgpa.toFixed(2);
  document.getElementById('statSemester').textContent = data.semester;
  document.getElementById('statRank').textContent = typeof data.rank === 'number' ? '#' + data.rank : data.rank;
  
  // Personal info
  document.getElementById('profileEmail').textContent = data.email;
  document.getElementById('profileContact').textContent = data.contact;
  document.getElementById('profileGender').textContent = data.gender;
  document.getElementById('profileAddress').textContent = data.address;
  
  // DOB formatting
  if (data.dob && data.dob !== 'Not provided') {
    document.getElementById('profileDOB').textContent = new Date(data.dob).toLocaleDateString('en-IN', { 
      year: 'numeric', month: 'long', day: 'numeric' 
    });
  } else {
    document.getElementById('profileDOB').textContent = data.dob;
  }
  
  // Subjects
  updateSubjects(data.subjects);
  
  // Attendance
  updateAttendanceChart(data.recentAttendance);
  updateAttendanceTable(data.recentAttendance);
}

function updateSubjects(subjects) {
  const container = document.getElementById('subjectsContainer');
  
  if (!subjects || subjects.length === 0) {
    container.innerHTML = '<p class="text-center text-muted py-4">No subject data available</p>';
    return;
  }
  
  container.innerHTML = subjects.map(subject => {
    const percentage = ((subject.marks / subject.total) * 100).toFixed(1);
    const gradeClass = percentage >= 90 ? 'excellent' : percentage >= 75 ? 'good' : percentage >= 60 ? 'average' : 'poor';
    const gradeColor = percentage >= 90 ? '#43e97b' : percentage >= 75 ? '#667eea' : percentage >= 60 ? '#4facfe' : '#f5576c';
    
    return `
      <div class="subject-item">
        <div class="subject-header">
          <div>
            <div class="subject-name">${subject.name}</div>
            <div class="subject-marks">Marks: ${subject.marks}/${subject.total}</div>
          </div>
          <div class="subject-percentage" style="color: ${gradeColor}">
            ${percentage}%
          </div>
        </div>
        <div class="progress-bar-custom">
          <div class="progress-fill ${gradeClass}" style="width: 0%" data-width="${percentage}%"></div>
        </div>
      </div>
    `;
  }).join('');
  
  // Animate progress bars
  setTimeout(() => {
    document.querySelectorAll('.progress-fill').forEach(bar => {
      bar.style.width = bar.getAttribute('data-width');
    });
  }, 100);
}

function updateAttendanceChart(attendance) {
  if (!attendanceChart || !attendance || attendance.length === 0) return;
  
  const labels = attendance.map(a => 
    new Date(a.date).toLocaleDateString('en-IN', { month: 'short', day: 'numeric' })
  );
  const data = attendance.map(a => a.present ? 1 : 0);
  
  attendanceChart.data.labels = labels.reverse();
  attendanceChart.data.datasets[0].data = data.reverse();
  attendanceChart.update();
}

function updateAttendanceTable(attendance) {
  const tbody = document.getElementById('attendanceTableBody');
  
  if (!attendance || attendance.length === 0) {
    tbody.innerHTML = '<tr><td colspan="3" class="text-center py-4 text-muted">No attendance records</td></tr>';
    return;
  }
  
  tbody.innerHTML = attendance.slice(0, 10).map(record => {
    const statusClass = record.present ? 'present' : 'absent';
    const icon = record.present ? 'check-circle-fill' : 'x-circle-fill';
    const status = record.present ? 'Present' : 'Absent';
    
    return `
      <tr>
        <td>
          <strong>${new Date(record.date).toLocaleDateString('en-IN', { 
            year: 'numeric', month: 'short', day: 'numeric' 
          })}</strong>
        </td>
        <td>
          <span class="status-badge ${statusClass}">
            <i class="bi bi-${icon}"></i>${status}
          </span>
        </td>
        <td class="text-muted">${record.day}</td>
      </tr>
    `;
  }).join('');
}

function showError() {
  document.body.innerHTML = `
    <div class="container mt-5 pt-5">
      <div class="content-card text-center py-5">
        <i class="bi bi-exclamation-triangle" style="font-size: 4rem; color: #f5576c;"></i>
        <h2 class="mt-4">Unable to Load Profile</h2>
        <p class="text-muted mt-3">Please <a href="/students/login/">login again</a> or contact support.</p>
      </div>
    </div>
  `;
}
</script>
</body></html>
